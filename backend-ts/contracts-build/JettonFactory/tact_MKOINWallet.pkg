{"name":"MKOINWallet","code":"te6ccgECDgEAA5EAAij/AI6I9KQT9LzyyAvtUyDjA+1D2QECAUmmXsC7UTQ0gABmvoA+kD6QFUgbBOa+kD6QFkC0QFwAuLbPGw0gAwPIMAHQctch0gDSAPpAIRA0UGZvBPhhAvhi7UTQ0gABmvoA+kD6QFUgbBOa+kD6QFkC0QFwAuIEkl8E4ALXDR/y4IIhghDomQSXuuMCIYIQbPq7PbrjAgGCEOkoqsG64wJfBPLAggQFBgEUUwHbPDBUYzBSMAgC+jHTP/oA+kD6QPQEMfoA+EFvJDAyggCQWFEaxwXy9IIA7s8mwgDy9IEQGQGCCvrwgL7y9IIA1VdTdb7y9FFkoVKE2zxccFkg+QAi+QBa12UB12WCAgE0yMsXyw/LD8v/y/9x+QQAyHQBywISygfL/8nQUHZwgEB/LEgTUHzICAcE/DHTP/oA+kD6QPoA+EFvJBAjXwNTCccFs467U5TbPAGBEU0CcFkg+QAi+QBa12UB12WCAgE0yMsXyw/LD8v/y/9x+QQAyHQBywISygfL/8nQEscF8vSRMOKBJiVTdaAovvL0UWSgIcIAlBAmbFHjDXCAQHCIEEUQJG1QQ20DyAgJCgsB/tM/+gD6QDD4QW8kW4FUJzImxwXy9IIA7s8iwgDy9IIA1VdTQr7y9FExoXCAQFQUNn8HyFUwghAprK61UAXLHxPLPwH6As7OySYEQxNQVRAkbVBDbQPIz4WAygDPhEDOAfoCgGnPQAJcbgFusJNbz4GdWM+GgM+EgPQA9ADPgeINANBVUIIQbPq7PVAHyx8Vyz9QA/oCzs4B+gLOyRBWEFcQNEATBxBGVSLIz4WAygDPhEDOAfoCgGnPQAJcbgFusJNbz4GdWM+GgM+EgPQA9ADPgeL0AMkB+wACyH8BygBVIFr6AhLOzsntVAAY+CrIcAHKAFoCzs7JALQVcVBUcAjIVTCCEHNi0JxQBcsfE8s/AfoCzs7JJgQQNUVmECRtUENtA8jPhYDKAM+EQM4B+gKAac9AAlxuAW6wk1vPgZ1Yz4aAz4SA9AD0AM+B4vQAyQH7AAEAPgAAAABNS09JTiB0cmFuc2ZlciBub3RpZmljYXRpb24BgInPFsoAz4RAzgH6AoBpz0ACXG4BbrCTW8+BnVjPhoDPhID0APQAz4Hi9ADJAfsAAsh/AcoAVSBa+gISzs7J7VQMAAFgAC70AMkB+wACyH8BygBVIFr6AhLOzsntVA==","abi":"{\"name\":\"MKOINWallet\",\"types\":[{\"name\":\"DataSize\",\"header\":null,\"fields\":[{\"name\":\"cells\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bits\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"refs\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"SignedBundle\",\"header\":null,\"fields\":[{\"name\":\"signature\",\"type\":{\"kind\":\"simple\",\"type\":\"fixed-bytes\",\"optional\":false,\"format\":64}},{\"name\":\"signedData\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounceable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"MessageParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"DeployParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"init\",\"type\":{\"kind\":\"simple\",\"type\":\"StateInit\",\"optional\":false}}]},{\"name\":\"StdAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":8}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}}]},{\"name\":\"VarAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":32}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"BasechainAddress\",\"header\":null,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}}]},{\"name\":\"Deploy\",\"header\":2490013878,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"DeployOk\",\"header\":2952335191,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"FactoryDeploy\",\"header\":1829761339,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"cashback\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"ChangeOwner\",\"header\":2174598809,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"newOwner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"ChangeOwnerOk\",\"header\":846932810,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"newOwner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"Mint\",\"header\":1225232691,\"fields\":[{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"receiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"JettonTransfer\",\"header\":3902342295,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"response_destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"custom_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"forward_ton_amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"forward_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"JettonInternalTransfer\",\"header\":1828371261,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"from\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"response_destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"forward_ton_amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"forward_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"JettonBurn\",\"header\":3911756481,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"response_destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"custom_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"JettonBurnNotification\",\"header\":699182773,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"response_destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"JettonData\",\"header\":null,\"fields\":[{\"name\":\"total_supply\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"mintable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"admin_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"content\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"jetton_wallet_code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"JettonWalletData\",\"header\":null,\"fields\":[{\"name\":\"balance\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"master\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"JettonMaster$Data\",\"header\":null,\"fields\":[{\"name\":\"total_supply\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"mintable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"content\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"JettonWallet$Data\",\"header\":null,\"fields\":[{\"name\":\"balance\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"master\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"JettonTransferNotification\",\"header\":1935855772,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"forward_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"MintTo\",\"header\":1507107013,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"receiver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"MKOINMaster$Data\",\"header\":null,\"fields\":[{\"name\":\"total_supply\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"mintable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"content\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"MKOINWallet$Data\",\"header\":null,\"fields\":[{\"name\":\"balance\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"master\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"PriceTier\",\"header\":null,\"fields\":[{\"name\":\"t1\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"t2\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"t3\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"p1\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"p2\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"p3\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"BuyPayload\",\"header\":null,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"min_jetton_amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"CreateJetton\",\"header\":3373663918,\"fields\":[{\"name\":\"farmer_wallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"content\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"initial_supply\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"JettonCreated\",\"header\":1469340785,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"farmer_wallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"initial_supply\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"MintMore\",\"header\":2598376432,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"UpdateFarmerWallet\",\"header\":1157477058,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"new_farmer_wallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"SetPrices\",\"header\":1911279822,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"prices\",\"type\":{\"kind\":\"simple\",\"type\":\"PriceTier\",\"optional\":false}}]},{\"name\":\"SetMKOINAddress\",\"header\":885445680,\"fields\":[{\"name\":\"mkoin_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"mkoin_wallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"Withdraw\",\"header\":3736794772,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"VerifyMKOINWallet\",\"header\":3759557962,\"fields\":[]},{\"name\":\"PricesSet\",\"header\":1531544022,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"t1\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"t2\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"t3\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"p1\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"p2\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"p3\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"FarmerWalletUpdated\",\"header\":4231095838,\"fields\":[{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"old_farmer_wallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"new_farmer_wallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"MKOINAddressSet\",\"header\":864823795,\"fields\":[{\"name\":\"mkoin_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"MKOINWalletVerified\",\"header\":4239497496,\"fields\":[{\"name\":\"mkoin_wallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"JettonPurchased\",\"header\":1446080124,\"fields\":[{\"name\":\"buyer\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"mkoin_paid\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"jetton_received\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"price_paid\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"MKOINWithdrawn\",\"header\":1856649586,\"fields\":[{\"name\":\"farmer\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"jetton_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}}]},{\"name\":\"JettonFactory$Data\",\"header\":null,\"fields\":[{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"jetton_count\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"farmer_wallets\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"address\"}},{\"name\":\"mkoin_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"mkoin_wallet_verified\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"jetton_prices\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"PriceTier\",\"valueFormat\":\"ref\"}},{\"name\":\"mkoin_balances\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"int\"}},{\"name\":\"jetton_balances\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"int\"}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"JettonTransfer\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"JettonInternalTransfer\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"JettonBurn\"}}],\"getters\":[{\"name\":\"get_wallet_data\",\"methodId\":97026,\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"JettonWalletData\",\"optional\":false}}],\"errors\":{\"2\":{\"message\":\"Stack underflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"11\":{\"message\":\"'Unknown' error\"},\"12\":{\"message\":\"Fatal error\"},\"13\":{\"message\":\"Out of gas error\"},\"14\":{\"message\":\"Virtualization error\"},\"32\":{\"message\":\"Action list is invalid\"},\"33\":{\"message\":\"Action list is too long\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"35\":{\"message\":\"Invalid source address in outbound message\"},\"36\":{\"message\":\"Invalid destination address in outbound message\"},\"37\":{\"message\":\"Not enough Toncoin\"},\"38\":{\"message\":\"Not enough extra currencies\"},\"39\":{\"message\":\"Outbound message does not fit into a cell after rewriting\"},\"40\":{\"message\":\"Cannot process a message\"},\"41\":{\"message\":\"Library reference is null\"},\"42\":{\"message\":\"Library change action error\"},\"43\":{\"message\":\"Exceeded maximum number of cells in the library or the maximum depth of the Merkle tree\"},\"50\":{\"message\":\"Account state size exceeded limits\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid standard address\"},\"138\":{\"message\":\"Not a basechain address\"},\"1623\":{\"message\":\"Total supply overflow\"},\"3317\":{\"message\":\"t2-t3 interval too short (min 1 hour)\"},\"4121\":{\"message\":\"Insufficient TON for transfer\"},\"4429\":{\"message\":\"Invalid sender\"},\"4592\":{\"message\":\"Invalid MKOIN wallet sender\"},\"5521\":{\"message\":\"Insufficient jetton stock\"},\"5993\":{\"message\":\"t1 must be positive\"},\"8266\":{\"message\":\"Jetton not tracked in factory\"},\"9765\":{\"message\":\"Balance overflow\"},\"10916\":{\"message\":\"t1-t2 interval too short (min 1 hour)\"},\"12258\":{\"message\":\"Prices not set\"},\"14754\":{\"message\":\"p3 must be positive\"},\"19182\":{\"message\":\"p2 must be positive\"},\"19249\":{\"message\":\"Jetton is not mintable\"},\"19560\":{\"message\":\"p3 must be >= p2 (prices should increase)\"},\"20473\":{\"message\":\"MKOIN wallet not set - use SetMKOINAddress first\"},\"21166\":{\"message\":\"MKOIN address not set\"},\"21543\":{\"message\":\"Only owner can burn\"},\"28044\":{\"message\":\"Prices not set for this jetton\"},\"30339\":{\"message\":\"MKOIN wallet not verified\"},\"30783\":{\"message\":\"Initial supply must be positive\"},\"31651\":{\"message\":\"Only farmer can withdraw\"},\"33588\":{\"message\":\"No MKOIN to withdraw\"},\"33795\":{\"message\":\"Jetton amount too small\"},\"35567\":{\"message\":\"p2 must be >= p1 (prices should increase)\"},\"36316\":{\"message\":\"Forward payload required\"},\"36952\":{\"message\":\"Only owner can transfer\"},\"37493\":{\"message\":\"t2 must be greater than t1\"},\"39862\":{\"message\":\"Must wait 24h after t3\"},\"41924\":{\"message\":\"Insufficient TON for deployment and minting\"},\"41968\":{\"message\":\"Not in selling period\"},\"42829\":{\"message\":\"Slippage: jetton amount below minimum\"},\"43719\":{\"message\":\"p1 must be positive\"},\"50902\":{\"message\":\"Jetton not found in factory\"},\"53683\":{\"message\":\"t3 must be greater than t2\"},\"54615\":{\"message\":\"Insufficient balance\"},\"55790\":{\"message\":\"Insufficient TON for minting\"},\"57603\":{\"message\":\"MKOIN amount exceeds limit\"},\"59515\":{\"message\":\"Jetton not found\"},\"61135\":{\"message\":\"Amount must be positive\"},\"61858\":{\"message\":\"t1 must be in the future\"},\"61988\":{\"message\":\"MKOIN minting is disabled\"},\"63065\":{\"message\":\"Total supply underflow\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\",\"org.ton.debug.v0\"]}","init":{"kind":"direct","args":[{"name":"master","type":{"kind":"simple","type":"address","optional":false}},{"name":"owner","type":{"kind":"simple","type":"address","optional":false}}],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":null}},"sources":{"contracts/jetton.tact":"aW1wb3J0ICJAc3RkbGliL2RlcGxveSI7CmltcG9ydCAiQHN0ZGxpYi9vd25hYmxlIjsKLy8gSmV0dG9uIE1hc3RlciBDb250cmFjdAptZXNzYWdlIE1pbnQgewogIGFtb3VudDogSW50IGFzIGNvaW5zOwogIHJlY2VpdmVyOiBBZGRyZXNzOwp9Cm1lc3NhZ2UgSmV0dG9uVHJhbnNmZXIgewogIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0OwogIGFtb3VudDogSW50IGFzIGNvaW5zOwogIGRlc3RpbmF0aW9uOiBBZGRyZXNzOwogIHJlc3BvbnNlX2Rlc3RpbmF0aW9uOiBBZGRyZXNzOwogIGN1c3RvbV9wYXlsb2FkOiBDZWxsPzsKICBmb3J3YXJkX3Rvbl9hbW91bnQ6IEludCBhcyBjb2luczsKICBmb3J3YXJkX3BheWxvYWQ6IFNsaWNlIGFzIHJlbWFpbmluZzsKfQptZXNzYWdlIEpldHRvbkludGVybmFsVHJhbnNmZXIgewogIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0OwogIGFtb3VudDogSW50IGFzIGNvaW5zOwogIGZyb206IEFkZHJlc3M7CiAgcmVzcG9uc2VfZGVzdGluYXRpb246IEFkZHJlc3M7CiAgZm9yd2FyZF90b25fYW1vdW50OiBJbnQgYXMgY29pbnM7CiAgZm9yd2FyZF9wYXlsb2FkOiBTbGljZSBhcyByZW1haW5pbmc7Cn0KbWVzc2FnZSBKZXR0b25CdXJuIHsKICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKICBhbW91bnQ6IEludCBhcyBjb2luczsKICByZXNwb25zZV9kZXN0aW5hdGlvbjogQWRkcmVzczsKICBjdXN0b21fcGF5bG9hZDogQ2VsbD87Cn0KbWVzc2FnZSBKZXR0b25CdXJuTm90aWZpY2F0aW9uIHsKICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKICBhbW91bnQ6IEludCBhcyBjb2luczsKICBzZW5kZXI6IEFkZHJlc3M7CiAgcmVzcG9uc2VfZGVzdGluYXRpb246IEFkZHJlc3M7Cn0Kc3RydWN0IEpldHRvbkRhdGEgewogIHRvdGFsX3N1cHBseTogSW50IGFzIGNvaW5zOwogIG1pbnRhYmxlOiBCb29sOwogIGFkbWluX2FkZHJlc3M6IEFkZHJlc3M7CiAgY29udGVudDogQ2VsbDsKICBqZXR0b25fd2FsbGV0X2NvZGU6IENlbGw7Cn0Kc3RydWN0IEpldHRvbldhbGxldERhdGEgewogIGJhbGFuY2U6IEludCBhcyBjb2luczsKICBvd25lcjogQWRkcmVzczsKICBtYXN0ZXI6IEFkZHJlc3M7CiAgY29kZTogQ2VsbDsKfQoKY29udHJhY3QgSmV0dG9uTWFzdGVyIHdpdGggRGVwbG95YWJsZSwgT3duYWJsZVRyYW5zZmVyYWJsZSB7CiAgdG90YWxfc3VwcGx5OiBJbnQgYXMgY29pbnM7CiAgbWludGFibGU6IEJvb2w7CiAgb3duZXI6IEFkZHJlc3M7CiAgY29udGVudDogQ2VsbDsKICBpbml0KG93bmVyOiBBZGRyZXNzLCBjb250ZW50OiBDZWxsKXsKICAgIHNlbGYudG90YWxfc3VwcGx5ID0gMDsKICAgIHNlbGYubWludGFibGUgPSB0cnVlOwogICAgc2VsZi5vd25lciA9IG93bmVyOwogICAgc2VsZi5jb250ZW50ID0gY29udGVudDsKICB9CgogIHJlY2VpdmUobXNnOiBNaW50KXsKICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICByZXF1aXJlKHNlbGYubWludGFibGUsICJKZXR0b24gaXMgbm90IG1pbnRhYmxlIik7CiAgICBzZWxmLnJlcXVpcmVPd25lcigpOwogICAgcmVxdWlyZShjdHgudmFsdWUgPj0gdG9uKCIwLjA1IiksICJJbnN1ZmZpY2llbnQgVE9OIGZvciBtaW50aW5nIik7CiAgICByZXF1aXJlKG1zZy5hbW91bnQgPiAwLCAiQW1vdW50IG11c3QgYmUgcG9zaXRpdmUiKTsKICAgIHNlbGYudG90YWxfc3VwcGx5ID0gc2VsZi50b3RhbF9zdXBwbHkgKyBtc2cuYW1vdW50OwogICAgbGV0IHdpbml0OiBTdGF0ZUluaXQgPSBzZWxmLmdldEpldHRvbldhbGxldEluaXQobXNnLnJlY2VpdmVyKTsKICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgdG86IGNvbnRyYWN0QWRkcmVzcyh3aW5pdCksCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICBib2R5OiBKZXR0b25JbnRlcm5hbFRyYW5zZmVyewogICAgICAgICAgcXVlcnlfaWQ6IDAsCiAgICAgICAgICBhbW91bnQ6IG1zZy5hbW91bnQsCiAgICAgICAgICBmcm9tOiBteUFkZHJlc3MoKSwKICAgICAgICAgIHJlc3BvbnNlX2Rlc3RpbmF0aW9uOiBzZWxmLm93bmVyLAogICAgICAgICAgZm9yd2FyZF90b25fYW1vdW50OiAwLAogICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBlbXB0eVNsaWNlKCkKICAgICAgICB9LnRvQ2VsbCgpLAogICAgICAgIGNvZGU6IHdpbml0LmNvZGUsCiAgICAgICAgZGF0YTogd2luaXQuZGF0YQogICAgICB9CiAgICApOwogIH0KCiAgcmVjZWl2ZShtc2c6IEpldHRvbkJ1cm5Ob3RpZmljYXRpb24pewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIC8vIFZlcmlmeSBzZW5kZXIgaXMgdGhlIHdhbGxldCBvZiB0aGUgYnVybmVyCiAgICByZXF1aXJlKGN0eC5zZW5kZXIgPT0gc2VsZi5nZXRKZXR0b25XYWxsZXRBZGRyZXNzKG1zZy5zZW5kZXIpLAogICAgICAiSW52YWxpZCBzZW5kZXIiCiAgICApOwogICAgc2VsZi50b3RhbF9zdXBwbHkgPSBzZWxmLnRvdGFsX3N1cHBseSAtIG1zZy5hbW91bnQ7CiAgICAvLyBTZW5kIGV4Y2VzcyBnYXMgYmFjayB0byByZXNwb25zZV9kZXN0aW5hdGlvbgogICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICB0bzogbXNnLnJlc3BvbnNlX2Rlc3RpbmF0aW9uLAogICAgICAgIHZhbHVlOiAwLAogICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgIGJvZHk6ICJCdXJuIHN1Y2Nlc3NmdWwiLmFzQ29tbWVudCgpCiAgICAgIH0KICAgICk7CiAgfQoKICBnZXQgZnVuIGdldF9qZXR0b25fZGF0YSgpOiBKZXR0b25EYXRhIHsKICAgIHJldHVybgogICAgICBKZXR0b25EYXRhewogICAgICAgIHRvdGFsX3N1cHBseTogc2VsZi50b3RhbF9zdXBwbHksCiAgICAgICAgbWludGFibGU6IHNlbGYubWludGFibGUsCiAgICAgICAgYWRtaW5fYWRkcmVzczogc2VsZi5vd25lciwKICAgICAgICBjb250ZW50OiBzZWxmLmNvbnRlbnQsCiAgICAgICAgamV0dG9uX3dhbGxldF9jb2RlOiBzZWxmLmdldEpldHRvbldhbGxldENvZGUoKQogICAgICB9OwogIH0KCiAgZ2V0IGZ1biBnZXRfd2FsbGV0X2FkZHJlc3Mob3duZXI6IEFkZHJlc3MpOiBBZGRyZXNzIHsKICAgIHJldHVybiBzZWxmLmdldEpldHRvbldhbGxldEFkZHJlc3Mob3duZXIpOwogIH0KCiAgZnVuIGdldEpldHRvbldhbGxldEFkZHJlc3Mob3duZXI6IEFkZHJlc3MpOiBBZGRyZXNzIHsKICAgIHJldHVybiBjb250cmFjdEFkZHJlc3Moc2VsZi5nZXRKZXR0b25XYWxsZXRJbml0KG93bmVyKSk7CiAgfQoKICBmdW4gZ2V0SmV0dG9uV2FsbGV0SW5pdChvd25lcjogQWRkcmVzcyk6IFN0YXRlSW5pdCB7CiAgICByZXR1cm4gaW5pdE9mIEpldHRvbldhbGxldChteUFkZHJlc3MoKSwgb3duZXIpOwogIH0KCiAgZnVuIGdldEpldHRvbldhbGxldENvZGUoKTogQ2VsbCB7CiAgICByZXR1cm4gc2VsZi5nZXRKZXR0b25XYWxsZXRJbml0KG15QWRkcmVzcygpKS5jb2RlOwogIH0KfQoKY29udHJhY3QgSmV0dG9uV2FsbGV0IHsKICBiYWxhbmNlOiBJbnQgYXMgY29pbnM7CiAgb3duZXI6IEFkZHJlc3M7CiAgbWFzdGVyOiBBZGRyZXNzOwogIGluaXQobWFzdGVyOiBBZGRyZXNzLCBvd25lcjogQWRkcmVzcyl7CiAgICBzZWxmLmJhbGFuY2UgPSAwOwogICAgc2VsZi5vd25lciA9IG93bmVyOwogICAgc2VsZi5tYXN0ZXIgPSBtYXN0ZXI7CiAgfQoKICByZWNlaXZlKG1zZzogSmV0dG9uVHJhbnNmZXIpewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIHJlcXVpcmUoY3R4LnNlbmRlciA9PSBzZWxmLm93bmVyLCAiSW52YWxpZCBzZW5kZXIiKTsKICAgIHJlcXVpcmUobXNnLmFtb3VudCA+IDAsICJBbW91bnQgbXVzdCBiZSBwb3NpdGl2ZSIpOwogICAgcmVxdWlyZShjdHgudmFsdWUgPj0gdG9uKCIwLjA1IiksICJJbnN1ZmZpY2llbnQgVE9OIGZvciB0cmFuc2ZlciIpOwogICAgc2VsZi5iYWxhbmNlID0gc2VsZi5iYWxhbmNlIC0gbXNnLmFtb3VudDsKICAgIHJlcXVpcmUoc2VsZi5iYWxhbmNlID49IDAsICJJbnN1ZmZpY2llbnQgYmFsYW5jZSIpOwogICAgbGV0IHdpbml0OiBTdGF0ZUluaXQgPSBpbml0T2YgSmV0dG9uV2FsbGV0KHNlbGYubWFzdGVyLCBtc2cuZGVzdGluYXRpb24pOwogICAgbGV0IHdhbGxldF9hZGRyZXNzOiBBZGRyZXNzID0gY29udHJhY3RBZGRyZXNzKHdpbml0KTsKICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgdG86IHdhbGxldF9hZGRyZXNzLAogICAgICAgIHZhbHVlOiAwLAogICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgYm9keTogSmV0dG9uSW50ZXJuYWxUcmFuc2ZlcnsKICAgICAgICAgIHF1ZXJ5X2lkOiBtc2cucXVlcnlfaWQsCiAgICAgICAgICBhbW91bnQ6IG1zZy5hbW91bnQsCiAgICAgICAgICBmcm9tOiBzZWxmLm93bmVyLAogICAgICAgICAgcmVzcG9uc2VfZGVzdGluYXRpb246IG1zZy5yZXNwb25zZV9kZXN0aW5hdGlvbiwKICAgICAgICAgIGZvcndhcmRfdG9uX2Ftb3VudDogbXNnLmZvcndhcmRfdG9uX2Ftb3VudCwKICAgICAgICAgIGZvcndhcmRfcGF5bG9hZDogbXNnLmZvcndhcmRfcGF5bG9hZAogICAgICAgIH0udG9DZWxsKCksCiAgICAgICAgY29kZTogd2luaXQuY29kZSwKICAgICAgICBkYXRhOiB3aW5pdC5kYXRhCiAgICAgIH0KICAgICk7CiAgfQoKICByZWNlaXZlKG1zZzogSmV0dG9uSW50ZXJuYWxUcmFuc2Zlcil7CiAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgaWYgKGN0eC5zZW5kZXIgIT0gc2VsZi5tYXN0ZXIpIHsKICAgICAgbGV0IHNpbml0OiBTdGF0ZUluaXQgPSBpbml0T2YgSmV0dG9uV2FsbGV0KHNlbGYubWFzdGVyLCBtc2cuZnJvbSk7CiAgICAgIHJlcXVpcmUoY3R4LnNlbmRlciA9PSBjb250cmFjdEFkZHJlc3Moc2luaXQpLCAiSW52YWxpZCBzZW5kZXIiKTsKICAgIH0KCiAgICAvLyBDaGVjayBvdmVyZmxvdyBCRUZPUkUgYWRkaW5nCiAgICByZXF1aXJlKChzZWxmLmJhbGFuY2UgKyBtc2cuYW1vdW50KSA+PSBzZWxmLmJhbGFuY2UsICJCYWxhbmNlIG92ZXJmbG93Iik7CiAgICBzZWxmLmJhbGFuY2UgPSBzZWxmLmJhbGFuY2UgKyBtc2cuYW1vdW50OwogICAgLy8gRm9yd2FyZCBub3RpZmljYXRpb24gaWYgbmVlZGVkCiAgICBpZiAobXNnLmZvcndhcmRfdG9uX2Ftb3VudCA+IDApIHsKICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgIHRvOiBzZWxmLm93bmVyLAogICAgICAgICAgdmFsdWU6IG1zZy5mb3J3YXJkX3Rvbl9hbW91bnQsCiAgICAgICAgICBtb2RlOiBTZW5kUGF5R2FzU2VwYXJhdGVseSwKICAgICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgICBib2R5OiBtc2cuZm9yd2FyZF9wYXlsb2FkLmFzQ2VsbCgpCiAgICAgICAgfQogICAgICApOwogICAgfQoKICAgIC8vIFNlbmQgZXhjZXNzIGdhcyBiYWNrIHRvIHJlc3BvbnNlX2Rlc3RpbmF0aW9uCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBtc2cucmVzcG9uc2VfZGVzdGluYXRpb24sCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogIlRyYW5zZmVyIG5vdGlmaWNhdGlvbiIuYXNDb21tZW50KCkKICAgICAgfQogICAgKTsKICB9CgogIHJlY2VpdmUobXNnOiBKZXR0b25CdXJuKXsKICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICByZXF1aXJlKGN0eC5zZW5kZXIgPT0gc2VsZi5vd25lciwgIkludmFsaWQgc2VuZGVyIik7CiAgICByZXF1aXJlKG1zZy5hbW91bnQgPiAwLCAiQW1vdW50IG11c3QgYmUgcG9zaXRpdmUiKTsKICAgIHNlbGYuYmFsYW5jZSA9IHNlbGYuYmFsYW5jZSAtIG1zZy5hbW91bnQ7CiAgICByZXF1aXJlKHNlbGYuYmFsYW5jZSA+PSAwLCAiSW5zdWZmaWNpZW50IGJhbGFuY2UiKTsKICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgdG86IHNlbGYubWFzdGVyLAogICAgICAgIHZhbHVlOiAwLAogICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgYm9keTogSmV0dG9uQnVybk5vdGlmaWNhdGlvbnsKICAgICAgICAgIHF1ZXJ5X2lkOiBtc2cucXVlcnlfaWQsCiAgICAgICAgICBhbW91bnQ6IG1zZy5hbW91bnQsCiAgICAgICAgICBzZW5kZXI6IHNlbGYub3duZXIsCiAgICAgICAgICByZXNwb25zZV9kZXN0aW5hdGlvbjogbXNnLnJlc3BvbnNlX2Rlc3RpbmF0aW9uCiAgICAgICAgfS50b0NlbGwoKQogICAgICB9CiAgICApOwogIH0KCiAgZ2V0IGZ1biBnZXRfd2FsbGV0X2RhdGEoKTogSmV0dG9uV2FsbGV0RGF0YSB7CiAgICByZXR1cm4KICAgICAgSmV0dG9uV2FsbGV0RGF0YXsKICAgICAgICBiYWxhbmNlOiBzZWxmLmJhbGFuY2UsCiAgICAgICAgb3duZXI6IHNlbGYub3duZXIsCiAgICAgICAgbWFzdGVyOiBzZWxmLm1hc3RlciwKICAgICAgICBjb2RlOiBpbml0T2YgSmV0dG9uV2FsbGV0KHNlbGYubWFzdGVyLCBzZWxmLm93bmVyKS5jb2RlCiAgICAgIH07CiAgfQp9","contracts/mkoin.tact":"aW1wb3J0ICJAc3RkbGliL2RlcGxveSI7CmltcG9ydCAiQHN0ZGxpYi9vd25hYmxlIjsKaW1wb3J0ICIuL2pldHRvbi50YWN0IjsKLy8gTUtPSU4gLSBFdXJvIFBlZ2dlZCBTdGFibGVjb2luCi8vIE9ubHkgYWRtaW4gY2FuIG1pbnQsIG1pbnRUbywgYW5kIGJ1cm4gdG9rZW5zCgovLyBUcmFuc2ZlciBub3RpZmljYXRpb24gbWVzc2FnZSAoVEVQLTc0IGNvbXBsaWFudCwgb3Bjb2RlIDB4NzM2MmQwOWMpCm1lc3NhZ2UoMHg3MzYyZDA5YykgSmV0dG9uVHJhbnNmZXJOb3RpZmljYXRpb24gewogIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0OwogIGFtb3VudDogSW50IGFzIGNvaW5zOwogIHNlbmRlcjogQWRkcmVzczsKICBmb3J3YXJkX3BheWxvYWQ6IFNsaWNlIGFzIHJlbWFpbmluZzsKfQoKbWVzc2FnZSBNaW50VG8gewogIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0OwogIGFtb3VudDogSW50IGFzIGNvaW5zOwogIHJlY2VpdmVyOiBBZGRyZXNzOwp9CgovLyBNS09JTiBNYXN0ZXIgQ29udHJhY3QgLSBFdXJvIFBlZ2dlZCBTdGFibGVjb2luCmNvbnRyYWN0IE1LT0lOTWFzdGVyIHdpdGggRGVwbG95YWJsZSwgT3duYWJsZVRyYW5zZmVyYWJsZSB7CiAgdG90YWxfc3VwcGx5OiBJbnQgYXMgY29pbnM7CiAgbWludGFibGU6IEJvb2w7CiAgb3duZXI6IEFkZHJlc3M7IC8vIEFkbWluIGFkZHJlc3MgLSBvbmx5IHRoaXMgYWRkcmVzcyBjYW4gbWludCBhbmQgYnVybgogIGNvbnRlbnQ6IENlbGw7CiAgaW5pdChvd25lcjogQWRkcmVzcywgY29udGVudDogQ2VsbCl7CiAgICBzZWxmLnRvdGFsX3N1cHBseSA9IDA7CiAgICBzZWxmLm1pbnRhYmxlID0gdHJ1ZTsKICAgIHNlbGYub3duZXIgPSBvd25lcjsKICAgIHNlbGYuY29udGVudCA9IGNvbnRlbnQ7CiAgfQoKICAvLyBBZG1pbiBvbmx5OiBNaW50IHRva2VucyB0byBhIHJlY2VpdmVyCiAgcmVjZWl2ZShtc2c6IE1pbnQpewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIHNlbGYucmVxdWlyZU93bmVyKCk7IC8vIE9ubHkgYWRtaW4gY2FuIG1pbnQKICAgIHJlcXVpcmUoc2VsZi5taW50YWJsZSwgIk1LT0lOIG1pbnRpbmcgaXMgZGlzYWJsZWQiKTsKICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IHRvbigiMC4wNSIpLCAiSW5zdWZmaWNpZW50IFRPTiBmb3IgbWludGluZyIpOwogICAgcmVxdWlyZShtc2cuYW1vdW50ID4gMCwgIkFtb3VudCBtdXN0IGJlIHBvc2l0aXZlIik7CiAgICAvLyBDaGVjayBvdmVyZmxvdyBCRUZPUkUgYWRkaW5nCiAgICByZXF1aXJlKChzZWxmLnRvdGFsX3N1cHBseSArIG1zZy5hbW91bnQpID49IHNlbGYudG90YWxfc3VwcGx5LAogICAgICAiVG90YWwgc3VwcGx5IG92ZXJmbG93IgogICAgKTsKICAgIHNlbGYudG90YWxfc3VwcGx5ID0gc2VsZi50b3RhbF9zdXBwbHkgKyBtc2cuYW1vdW50OwogICAgbGV0IHdpbml0OiBTdGF0ZUluaXQgPSBzZWxmLmdldEpldHRvbldhbGxldEluaXQobXNnLnJlY2VpdmVyKTsKICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgdG86IGNvbnRyYWN0QWRkcmVzcyh3aW5pdCksCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICBib2R5OiBKZXR0b25JbnRlcm5hbFRyYW5zZmVyewogICAgICAgICAgcXVlcnlfaWQ6IDAsCiAgICAgICAgICBhbW91bnQ6IG1zZy5hbW91bnQsCiAgICAgICAgICBmcm9tOiBteUFkZHJlc3MoKSwKICAgICAgICAgIHJlc3BvbnNlX2Rlc3RpbmF0aW9uOiBzZWxmLm93bmVyLAogICAgICAgICAgZm9yd2FyZF90b25fYW1vdW50OiAwLAogICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBlbXB0eVNsaWNlKCkKICAgICAgICB9LnRvQ2VsbCgpLAogICAgICAgIGNvZGU6IHdpbml0LmNvZGUsCiAgICAgICAgZGF0YTogd2luaXQuZGF0YQogICAgICB9CiAgICApOwogIH0KCiAgLy8gQWRtaW4gb25seTogTWludCB0b2tlbnMgdG8gYSBzcGVjaWZpYyBhZGRyZXNzIHdpdGggcXVlcnlfaWQKICByZWNlaXZlKG1zZzogTWludFRvKXsKICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICBzZWxmLnJlcXVpcmVPd25lcigpOyAvLyBPbmx5IGFkbWluIGNhbiBtaW50CiAgICByZXF1aXJlKHNlbGYubWludGFibGUsICJNS09JTiBtaW50aW5nIGlzIGRpc2FibGVkIik7CiAgICByZXF1aXJlKGN0eC52YWx1ZSA+PSB0b24oIjAuMDUiKSwgIkluc3VmZmljaWVudCBUT04gZm9yIG1pbnRpbmciKTsKICAgIHJlcXVpcmUobXNnLmFtb3VudCA+IDAsICJBbW91bnQgbXVzdCBiZSBwb3NpdGl2ZSIpOwogICAgLy8gQ2hlY2sgb3ZlcmZsb3cgQkVGT1JFIGFkZGluZwogICAgcmVxdWlyZSgoc2VsZi50b3RhbF9zdXBwbHkgKyBtc2cuYW1vdW50KSA+PSBzZWxmLnRvdGFsX3N1cHBseSwKICAgICAgIlRvdGFsIHN1cHBseSBvdmVyZmxvdyIKICAgICk7CiAgICBzZWxmLnRvdGFsX3N1cHBseSA9IHNlbGYudG90YWxfc3VwcGx5ICsgbXNnLmFtb3VudDsKICAgIGxldCB3aW5pdDogU3RhdGVJbml0ID0gc2VsZi5nZXRKZXR0b25XYWxsZXRJbml0KG1zZy5yZWNlaXZlcik7CiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBjb250cmFjdEFkZHJlc3Mod2luaXQpLAogICAgICAgIHZhbHVlOiAwLAogICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgYm9keTogSmV0dG9uSW50ZXJuYWxUcmFuc2ZlcnsKICAgICAgICAgIHF1ZXJ5X2lkOiBtc2cucXVlcnlfaWQsCiAgICAgICAgICBhbW91bnQ6IG1zZy5hbW91bnQsCiAgICAgICAgICBmcm9tOiBteUFkZHJlc3MoKSwKICAgICAgICAgIHJlc3BvbnNlX2Rlc3RpbmF0aW9uOiBzZWxmLm93bmVyLAogICAgICAgICAgZm9yd2FyZF90b25fYW1vdW50OiAwLAogICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBlbXB0eVNsaWNlKCkKICAgICAgICB9LnRvQ2VsbCgpLAogICAgICAgIGNvZGU6IHdpbml0LmNvZGUsCiAgICAgICAgZGF0YTogd2luaXQuZGF0YQogICAgICB9CiAgICApOwogIH0KCiAgLy8gUmVjZWl2ZSBidXJuIG5vdGlmaWNhdGlvbiBmcm9tIHdhbGxldAogIHJlY2VpdmUobXNnOiBKZXR0b25CdXJuTm90aWZpY2F0aW9uKXsKICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAvLyBWZXJpZnkgc2VuZGVyIGlzIGEgdmFsaWQgd2FsbGV0CiAgICByZXF1aXJlKGN0eC5zZW5kZXIgPT0gc2VsZi5nZXRKZXR0b25XYWxsZXRBZGRyZXNzKG1zZy5zZW5kZXIpLAogICAgICAiSW52YWxpZCBzZW5kZXIiCiAgICApOwogICAgLy8gQ2hlY2sgdW5kZXJmbG93IEJFRk9SRSBzdWJ0cmFjdGluZwogICAgcmVxdWlyZShzZWxmLnRvdGFsX3N1cHBseSA+PSBtc2cuYW1vdW50LCAiVG90YWwgc3VwcGx5IHVuZGVyZmxvdyIpOwogICAgc2VsZi50b3RhbF9zdXBwbHkgPSBzZWxmLnRvdGFsX3N1cHBseSAtIG1zZy5hbW91bnQ7CiAgICAvLyBTZW5kIGNvbmZpcm1hdGlvbiBiYWNrIHRvIHJlc3BvbnNlX2Rlc3RpbmF0aW9uCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBtc2cucmVzcG9uc2VfZGVzdGluYXRpb24sCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogIk1LT0lOIGJ1cm4gc3VjY2Vzc2Z1bCIuYXNDb21tZW50KCkKICAgICAgfQogICAgKTsKICB9CgogIC8vIEdldCBqZXR0b24gZGF0YQogIGdldCBmdW4gZ2V0X2pldHRvbl9kYXRhKCk6IEpldHRvbkRhdGEgewogICAgcmV0dXJuCiAgICAgIEpldHRvbkRhdGF7CiAgICAgICAgdG90YWxfc3VwcGx5OiBzZWxmLnRvdGFsX3N1cHBseSwKICAgICAgICBtaW50YWJsZTogc2VsZi5taW50YWJsZSwKICAgICAgICBhZG1pbl9hZGRyZXNzOiBzZWxmLm93bmVyLAogICAgICAgIGNvbnRlbnQ6IHNlbGYuY29udGVudCwKICAgICAgICBqZXR0b25fd2FsbGV0X2NvZGU6IHNlbGYuZ2V0SmV0dG9uV2FsbGV0Q29kZSgpCiAgICAgIH07CiAgfQoKICAvLyBHZXQgd2FsbGV0IGFkZHJlc3MgZm9yIG93bmVyCgogIGdldCBmdW4gZ2V0X3dhbGxldF9hZGRyZXNzKG93bmVyOiBBZGRyZXNzKTogQWRkcmVzcyB7CiAgICByZXR1cm4gc2VsZi5nZXRKZXR0b25XYWxsZXRBZGRyZXNzKG93bmVyKTsKICB9CgogIC8vIEludGVybmFsIGZ1bmN0aW9uIHRvIGdldCB3YWxsZXQgYWRkcmVzcwoKICBmdW4gZ2V0SmV0dG9uV2FsbGV0QWRkcmVzcyhvd25lcjogQWRkcmVzcyk6IEFkZHJlc3MgewogICAgcmV0dXJuIGNvbnRyYWN0QWRkcmVzcyhzZWxmLmdldEpldHRvbldhbGxldEluaXQob3duZXIpKTsKICB9CgogIC8vIEludGVybmFsIGZ1bmN0aW9uIHRvIGdldCB3YWxsZXQgU3RhdGVJbml0CgogIGZ1biBnZXRKZXR0b25XYWxsZXRJbml0KG93bmVyOiBBZGRyZXNzKTogU3RhdGVJbml0IHsKICAgIHJldHVybiBpbml0T2YgTUtPSU5XYWxsZXQobXlBZGRyZXNzKCksIG93bmVyKTsKICB9CgogIC8vIEludGVybmFsIGZ1bmN0aW9uIHRvIGdldCB3YWxsZXQgY29kZQoKICBmdW4gZ2V0SmV0dG9uV2FsbGV0Q29kZSgpOiBDZWxsIHsKICAgIHJldHVybiBzZWxmLmdldEpldHRvbldhbGxldEluaXQobXlBZGRyZXNzKCkpLmNvZGU7CiAgfQp9CgovLyBNS09JTiBXYWxsZXQgQ29udHJhY3QKY29udHJhY3QgTUtPSU5XYWxsZXQgewogIGJhbGFuY2U6IEludCBhcyBjb2luczsKICBvd25lcjogQWRkcmVzczsKICBtYXN0ZXI6IEFkZHJlc3M7CiAgaW5pdChtYXN0ZXI6IEFkZHJlc3MsIG93bmVyOiBBZGRyZXNzKXsKICAgIHNlbGYuYmFsYW5jZSA9IDA7CiAgICBzZWxmLm93bmVyID0gb3duZXI7CiAgICBzZWxmLm1hc3RlciA9IG1hc3RlcjsKICB9CgogIC8vIFRyYW5zZmVyIHRva2VucyB0byBhbm90aGVyIGFkZHJlc3MKICByZWNlaXZlKG1zZzogSmV0dG9uVHJhbnNmZXIpewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIHJlcXVpcmUoY3R4LnNlbmRlciA9PSBzZWxmLm93bmVyLCAiT25seSBvd25lciBjYW4gdHJhbnNmZXIiKTsKICAgIHJlcXVpcmUobXNnLmFtb3VudCA+IDAsICJBbW91bnQgbXVzdCBiZSBwb3NpdGl2ZSIpOwogICAgcmVxdWlyZShjdHgudmFsdWUgPj0gdG9uKCIwLjA1IiksICJJbnN1ZmZpY2llbnQgVE9OIGZvciB0cmFuc2ZlciIpOwogICAgLy8gQ2hlY2sgdW5kZXJmbG93IEJFRk9SRSBzdWJ0cmFjdGluZwogICAgcmVxdWlyZShzZWxmLmJhbGFuY2UgPj0gbXNnLmFtb3VudCwgIkluc3VmZmljaWVudCBiYWxhbmNlIik7CiAgICBzZWxmLmJhbGFuY2UgPSBzZWxmLmJhbGFuY2UgLSBtc2cuYW1vdW50OwogICAgbGV0IHdpbml0OiBTdGF0ZUluaXQgPSBpbml0T2YgTUtPSU5XYWxsZXQoc2VsZi5tYXN0ZXIsIG1zZy5kZXN0aW5hdGlvbik7CiAgICBsZXQgd2FsbGV0X2FkZHJlc3M6IEFkZHJlc3MgPSBjb250cmFjdEFkZHJlc3Mod2luaXQpOwogICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICB0bzogd2FsbGV0X2FkZHJlc3MsCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICBib2R5OiBKZXR0b25JbnRlcm5hbFRyYW5zZmVyewogICAgICAgICAgcXVlcnlfaWQ6IG1zZy5xdWVyeV9pZCwKICAgICAgICAgIGFtb3VudDogbXNnLmFtb3VudCwKICAgICAgICAgIGZyb206IHNlbGYub3duZXIsCiAgICAgICAgICByZXNwb25zZV9kZXN0aW5hdGlvbjogbXNnLnJlc3BvbnNlX2Rlc3RpbmF0aW9uLAogICAgICAgICAgZm9yd2FyZF90b25fYW1vdW50OiBtc2cuZm9yd2FyZF90b25fYW1vdW50LAogICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBtc2cuZm9yd2FyZF9wYXlsb2FkCiAgICAgICAgfS50b0NlbGwoKSwKICAgICAgICBjb2RlOiB3aW5pdC5jb2RlLAogICAgICAgIGRhdGE6IHdpbml0LmRhdGEKICAgICAgfQogICAgKTsKICB9CgogIC8vIFJlY2VpdmUgdG9rZW5zIGZyb20gaW50ZXJuYWwgdHJhbnNmZXIKICByZWNlaXZlKG1zZzogSmV0dG9uSW50ZXJuYWxUcmFuc2Zlcil7CiAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgLy8gVmVyaWZ5IHNlbmRlciBpcyBlaXRoZXIgbWFzdGVyIG9yIGFub3RoZXIgdmFsaWQgd2FsbGV0CiAgICBpZiAoY3R4LnNlbmRlciAhPSBzZWxmLm1hc3RlcikgewogICAgICBsZXQgc2luaXQ6IFN0YXRlSW5pdCA9IGluaXRPZiBNS09JTldhbGxldChzZWxmLm1hc3RlciwgbXNnLmZyb20pOwogICAgICByZXF1aXJlKGN0eC5zZW5kZXIgPT0gY29udHJhY3RBZGRyZXNzKHNpbml0KSwgIkludmFsaWQgc2VuZGVyIik7CiAgICB9CiAgICAvLyBDaGVjayBvdmVyZmxvdyBCRUZPUkUgYWRkaW5nCiAgICByZXF1aXJlKChzZWxmLmJhbGFuY2UgKyBtc2cuYW1vdW50KSA+PSBzZWxmLmJhbGFuY2UsICJCYWxhbmNlIG92ZXJmbG93Iik7CiAgICBzZWxmLmJhbGFuY2UgPSBzZWxmLmJhbGFuY2UgKyBtc2cuYW1vdW50OwogICAgLy8gRm9yd2FyZCBub3RpZmljYXRpb24gaWYgbmVlZGVkIChURVAtNzQgY29tcGxpYW50KQogICAgaWYgKG1zZy5mb3J3YXJkX3Rvbl9hbW91bnQgPiAwKSB7CiAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICB0bzogc2VsZi5vd25lciwKICAgICAgICAgIHZhbHVlOiBtc2cuZm9yd2FyZF90b25fYW1vdW50LAogICAgICAgICAgbW9kZTogU2VuZFBheUdhc1NlcGFyYXRlbHksCiAgICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgICAgYm9keTogSmV0dG9uVHJhbnNmZXJOb3RpZmljYXRpb257CiAgICAgICAgICAgIHF1ZXJ5X2lkOiBtc2cucXVlcnlfaWQsCiAgICAgICAgICAgIGFtb3VudDogbXNnLmFtb3VudCwKICAgICAgICAgICAgc2VuZGVyOiBtc2cuZnJvbSwKICAgICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBtc2cuZm9yd2FyZF9wYXlsb2FkCiAgICAgICAgICB9LnRvQ2VsbCgpCiAgICAgICAgfQogICAgICApOwogICAgfQoKICAgIC8vIFNlbmQgZXhjZXNzIGdhcyBiYWNrIHRvIHJlc3BvbnNlX2Rlc3RpbmF0aW9uCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBtc2cucmVzcG9uc2VfZGVzdGluYXRpb24sCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogIk1LT0lOIHRyYW5zZmVyIG5vdGlmaWNhdGlvbiIuYXNDb21tZW50KCkKICAgICAgfQogICAgKTsKICB9CgogIC8vIEJ1cm4gdG9rZW5zIChvbmx5IG93bmVyIGNhbiBidXJuIHRoZWlyIG93biB0b2tlbnMpCiAgcmVjZWl2ZShtc2c6IEpldHRvbkJ1cm4pewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIC8vIE9ubHkgb3duZXIgY2FuIGJ1cm4gdGhlaXIgb3duIHRva2VucwogICAgcmVxdWlyZShjdHguc2VuZGVyID09IHNlbGYub3duZXIsICJPbmx5IG93bmVyIGNhbiBidXJuIik7CiAgICByZXF1aXJlKG1zZy5hbW91bnQgPiAwLCAiQW1vdW50IG11c3QgYmUgcG9zaXRpdmUiKTsKICAgIC8vIENoZWNrIHVuZGVyZmxvdyBCRUZPUkUgc3VidHJhY3RpbmcKICAgIHJlcXVpcmUoc2VsZi5iYWxhbmNlID49IG1zZy5hbW91bnQsICJJbnN1ZmZpY2llbnQgYmFsYW5jZSIpOwogICAgc2VsZi5iYWxhbmNlID0gc2VsZi5iYWxhbmNlIC0gbXNnLmFtb3VudDsKICAgIC8vIFNlbmQgYnVybiBub3RpZmljYXRpb24gdG8gbWFzdGVyCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBzZWxmLm1hc3RlciwKICAgICAgICB2YWx1ZTogMCwKICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgYm91bmNlOiB0cnVlLAogICAgICAgIGJvZHk6IEpldHRvbkJ1cm5Ob3RpZmljYXRpb257CiAgICAgICAgICBxdWVyeV9pZDogbXNnLnF1ZXJ5X2lkLAogICAgICAgICAgYW1vdW50OiBtc2cuYW1vdW50LAogICAgICAgICAgc2VuZGVyOiBzZWxmLm93bmVyLAogICAgICAgICAgcmVzcG9uc2VfZGVzdGluYXRpb246IG1zZy5yZXNwb25zZV9kZXN0aW5hdGlvbgogICAgICAgIH0udG9DZWxsKCkKICAgICAgfQogICAgKTsKICB9CgogIC8vIEdldCB3YWxsZXQgZGF0YQogIGdldCBmdW4gZ2V0X3dhbGxldF9kYXRhKCk6IEpldHRvbldhbGxldERhdGEgewogICAgcmV0dXJuCiAgICAgIEpldHRvbldhbGxldERhdGF7CiAgICAgICAgYmFsYW5jZTogc2VsZi5iYWxhbmNlLAogICAgICAgIG93bmVyOiBzZWxmLm93bmVyLAogICAgICAgIG1hc3Rlcjogc2VsZi5tYXN0ZXIsCiAgICAgICAgY29kZTogaW5pdE9mIE1LT0lOV2FsbGV0KHNlbGYubWFzdGVyLCBzZWxmLm93bmVyKS5jb2RlCiAgICAgIH07CiAgfQp9","contracts/factory.tact":"aW1wb3J0ICJAc3RkbGliL2RlcGxveSI7CmltcG9ydCAiQHN0ZGxpYi9vd25hYmxlIjsKaW1wb3J0ICIuL2pldHRvbi50YWN0IjsKaW1wb3J0ICIuL21rb2luLnRhY3QiOwovLyBQcmljZSB0aWVyIHN0cnVjdHVyZQpzdHJ1Y3QgUHJpY2VUaWVyIHsKICB0MTogSW50IGFzIHVpbnQ2NDsgLy8gRmlyc3QgdGltZSB0aHJlc2hvbGQgKHRpbWVzdGFtcCkKICB0MjogSW50IGFzIHVpbnQ2NDsgLy8gU2Vjb25kIHRpbWUgdGhyZXNob2xkICh0aW1lc3RhbXApCiAgdDM6IEludCBhcyB1aW50NjQ7IC8vIFRoaXJkIHRpbWUgdGhyZXNob2xkICh0aW1lc3RhbXApCiAgcDE6IEludCBhcyBjb2luczsgLy8gUHJpY2UgZm9yIHBlcmlvZCA8IHQxCiAgcDI6IEludCBhcyBjb2luczsgLy8gUHJpY2UgZm9yIHBlcmlvZCB0MSAtIHQyCiAgcDM6IEludCBhcyBjb2luczsgLy8gUHJpY2UgZm9yIHBlcmlvZCB0MiAtIHQzCn0KCi8vIEZvcndhcmQgcGF5bG9hZCBmb3IgYnV5aW5nIGpldHRvbiB3aXRoIE1LT0lOCnN0cnVjdCBCdXlQYXlsb2FkIHsKICBqZXR0b25fYWRkcmVzczogQWRkcmVzczsgIC8vIFdoaWNoIGFncmktamV0dG9uIHRvIGJ1eQogIG1pbl9qZXR0b25fYW1vdW50OiBJbnQgYXMgY29pbnM7ICAvLyBNaW5pbXVtIGpldHRvbiBhbW91bnQgZXhwZWN0ZWQgKHNsaXBwYWdlIHByb3RlY3Rpb24pCn0KCi8vIEpldHRvblRyYW5zZmVyTm90aWZpY2F0aW9uIGlzIGltcG9ydGVkIGZyb20gbWtvaW4udGFjdAoKbWVzc2FnZSBDcmVhdGVKZXR0b24gewogIGZhcm1lcl93YWxsZXQ6IEFkZHJlc3M7IC8vIEZhcm1lcidzIHdhbGxldCBhZGRyZXNzIGZvciBmdXR1cmUgaW50ZXJhY3Rpb25zCiAgY29udGVudDogQ2VsbDsgLy8gSmV0dG9uIG1ldGFkYXRhIChuYW1lLCBzeW1ib2wsIGF2YXRhciwgZXRjLikKICBpbml0aWFsX3N1cHBseTogSW50IGFzIGNvaW5zOyAvLyBJbml0aWFsIHN1cHBseSB0byBtaW50IHRvIGZhY3RvcnkKfQptZXNzYWdlIEpldHRvbkNyZWF0ZWQgewogIGpldHRvbl9hZGRyZXNzOiBBZGRyZXNzOwogIGZhcm1lcl93YWxsZXQ6IEFkZHJlc3M7CiAgaW5pdGlhbF9zdXBwbHk6IEludCBhcyBjb2luczsKfQptZXNzYWdlIE1pbnRNb3JlIHsKICBqZXR0b25fYWRkcmVzczogQWRkcmVzczsgLy8gV2hpY2ggamV0dG9uIHRvIG1pbnQKICBhbW91bnQ6IEludCBhcyBjb2luczsgLy8gQW1vdW50IHRvIG1pbnQKfQptZXNzYWdlIFVwZGF0ZUZhcm1lcldhbGxldCB7CiAgamV0dG9uX2FkZHJlc3M6IEFkZHJlc3M7IC8vIFdoaWNoIGpldHRvbiB0byB1cGRhdGUKICBuZXdfZmFybWVyX3dhbGxldDogQWRkcmVzczsgLy8gTmV3IGZhcm1lciB3YWxsZXQgYWRkcmVzcwp9Cm1lc3NhZ2UgU2V0UHJpY2VzIHsKICBqZXR0b25fYWRkcmVzczogQWRkcmVzczsgLy8gV2hpY2ggamV0dG9uIHRvIHNldCBwcmljZXMgZm9yCiAgcHJpY2VzOiBQcmljZVRpZXI7IC8vIFByaWNlIHRpZXJzCn0KbWVzc2FnZSBTZXRNS09JTkFkZHJlc3MgewogIG1rb2luX2FkZHJlc3M6IEFkZHJlc3M7IC8vIE1LT0lOIGNvbnRyYWN0IGFkZHJlc3MKICBta29pbl93YWxsZXQ6IEFkZHJlc3M7ICAvLyBGYWN0b3J5J3MgTUtPSU4gd2FsbGV0IGFkZHJlc3MgKGNhbGN1bGF0ZWQgb2ZmLWNoYWluKQp9CgptZXNzYWdlIFdpdGhkcmF3IHsKICBqZXR0b25fYWRkcmVzczogQWRkcmVzczsgIC8vIFdoaWNoIGpldHRvbidzIE1LT0lOIHRvIHdpdGhkcmF3Cn0KCm1lc3NhZ2UgVmVyaWZ5TUtPSU5XYWxsZXQgewogIC8vIE5vIHBhcmFtZXRlcnMgLSBqdXN0IHRyaWdnZXJzIHZlcmlmaWNhdGlvbgp9CgovLyBFdmVudCBtZXNzYWdlcyBmb3IgaW1wb3J0YW50IG9wZXJhdGlvbnMKbWVzc2FnZSBQcmljZXNTZXQgewogIGpldHRvbl9hZGRyZXNzOiBBZGRyZXNzOwogIHQxOiBJbnQgYXMgdWludDY0OwogIHQyOiBJbnQgYXMgdWludDY0OwogIHQzOiBJbnQgYXMgdWludDY0OwogIHAxOiBJbnQgYXMgY29pbnM7CiAgcDI6IEludCBhcyBjb2luczsKICBwMzogSW50IGFzIGNvaW5zOwp9CgptZXNzYWdlIEZhcm1lcldhbGxldFVwZGF0ZWQgewogIGpldHRvbl9hZGRyZXNzOiBBZGRyZXNzOwogIG9sZF9mYXJtZXJfd2FsbGV0OiBBZGRyZXNzOwogIG5ld19mYXJtZXJfd2FsbGV0OiBBZGRyZXNzOwp9CgptZXNzYWdlIE1LT0lOQWRkcmVzc1NldCB7CiAgbWtvaW5fYWRkcmVzczogQWRkcmVzczsKfQoKbWVzc2FnZSBNS09JTldhbGxldFZlcmlmaWVkIHsKICBta29pbl93YWxsZXQ6IEFkZHJlc3M7Cn0KCm1lc3NhZ2UgSmV0dG9uUHVyY2hhc2VkIHsKICBidXllcjogQWRkcmVzczsKICBqZXR0b25fYWRkcmVzczogQWRkcmVzczsKICBta29pbl9wYWlkOiBJbnQgYXMgY29pbnM7CiAgamV0dG9uX3JlY2VpdmVkOiBJbnQgYXMgY29pbnM7CiAgcHJpY2VfcGFpZDogSW50IGFzIGNvaW5zOwp9CgptZXNzYWdlIE1LT0lOV2l0aGRyYXduIHsKICBmYXJtZXI6IEFkZHJlc3M7CiAgamV0dG9uX2FkZHJlc3M6IEFkZHJlc3M7CiAgYW1vdW50OiBJbnQgYXMgY29pbnM7Cn0KCmNvbnRyYWN0IEpldHRvbkZhY3Rvcnkgd2l0aCBEZXBsb3lhYmxlLCBPd25hYmxlVHJhbnNmZXJhYmxlIHsKICBvd25lcjogQWRkcmVzczsKICBqZXR0b25fY291bnQ6IEludCBhcyB1aW50MzI7CiAgZmFybWVyX3dhbGxldHM6IG1hcDxBZGRyZXNzLCBBZGRyZXNzPjsgLy8gamV0dG9uX2FkZHJlc3MgPT4gZmFybWVyX3dhbGxldAogIG1rb2luX2FkZHJlc3M6IEFkZHJlc3M/OyAvLyBNS09JTiBjb250cmFjdCBhZGRyZXNzCiAgbWtvaW5fd2FsbGV0X3ZlcmlmaWVkOiBBZGRyZXNzPzsgLy8gRmFjdG9yeSdzIHZlcmlmaWVkIE1LT0lOIHdhbGxldCBhZGRyZXNzCiAgamV0dG9uX3ByaWNlczogbWFwPEFkZHJlc3MsIFByaWNlVGllcj47IC8vIGpldHRvbl9hZGRyZXNzID0+IHByaWNlIHRpZXJzCiAgbWtvaW5fYmFsYW5jZXM6IG1hcDxBZGRyZXNzLCBJbnQ+OyAvLyBqZXR0b25fYWRkcmVzcyA9PiBhY2N1bXVsYXRlZCBNS09JTgogIGpldHRvbl9iYWxhbmNlczogbWFwPEFkZHJlc3MsIEludD47IC8vIGpldHRvbl9hZGRyZXNzID0+IGZhY3RvcnkncyBqZXR0b24gYmFsYW5jZQoKICBpbml0KG93bmVyOiBBZGRyZXNzKXsKICAgIHNlbGYub3duZXIgPSBvd25lcjsKICAgIHNlbGYuamV0dG9uX2NvdW50ID0gMDsKICAgIHNlbGYuZmFybWVyX3dhbGxldHMgPSBlbXB0eU1hcCgpOwogICAgc2VsZi5ta29pbl9hZGRyZXNzID0gbnVsbDsKICAgIHNlbGYubWtvaW5fd2FsbGV0X3ZlcmlmaWVkID0gbnVsbDsKICAgIHNlbGYuamV0dG9uX3ByaWNlcyA9IGVtcHR5TWFwKCk7CiAgICBzZWxmLm1rb2luX2JhbGFuY2VzID0gZW1wdHlNYXAoKTsKICAgIHNlbGYuamV0dG9uX2JhbGFuY2VzID0gZW1wdHlNYXAoKTsKICB9CgogIC8vIE9ubHkgYWRtaW4gY2FuIGNyZWF0ZSBhZ3JpLWpldHRvbnMKICByZWNlaXZlKG1zZzogQ3JlYXRlSmV0dG9uKXsKICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICBzZWxmLnJlcXVpcmVPd25lcigpOyAvLyBPbmx5IGZhY3Rvcnkgb3duZXIgKGFkbWluKSBjYW4gY3JlYXRlIGpldHRvbnMKICAgIHJlcXVpcmUoY3R4LnZhbHVlID49IHRvbigiMS4wIiksCiAgICAgICJJbnN1ZmZpY2llbnQgVE9OIGZvciBkZXBsb3ltZW50IGFuZCBtaW50aW5nIgogICAgKTsKICAgIHJlcXVpcmUobXNnLmluaXRpYWxfc3VwcGx5ID4gMCwgIkluaXRpYWwgc3VwcGx5IG11c3QgYmUgcG9zaXRpdmUiKTsKICAgIC8vIEluY3JlbWVudCBjb3VudGVyCiAgICBzZWxmLmpldHRvbl9jb3VudCA9IHNlbGYuamV0dG9uX2NvdW50ICsgMTsKICAgIC8vIENyZWF0ZSBTdGF0ZUluaXQgZm9yIG5ldyBKZXR0b25NYXN0ZXIgKGZhY3RvcnkgaXMgdGhlIG93bmVyKQogICAgbGV0IGpldHRvbl9pbml0OiBTdGF0ZUluaXQgPSBpbml0T2YgSmV0dG9uTWFzdGVyKG15QWRkcmVzcygpLCBtc2cuY29udGVudCk7CiAgICBsZXQgamV0dG9uX2FkZHJlc3M6IEFkZHJlc3MgPSBjb250cmFjdEFkZHJlc3MoamV0dG9uX2luaXQpOwogICAgLy8gU2F2ZSBmYXJtZXJfd2FsbGV0IG1hcHBpbmcKICAgIHNlbGYuZmFybWVyX3dhbGxldHMuc2V0KGpldHRvbl9hZGRyZXNzLCBtc2cuZmFybWVyX3dhbGxldCk7CiAgICAvLyBEZXBsb3kgSmV0dG9uTWFzdGVyIGNvbnRyYWN0CiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBqZXR0b25fYWRkcmVzcywKICAgICAgICB2YWx1ZTogdG9uKCIxIiksCiAgICAgICAgbW9kZTogU2VuZElnbm9yZUVycm9ycywKICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgIGJvZHk6ICJEZXBsb3kiLmFzQ29tbWVudCgpLAogICAgICAgIGNvZGU6IGpldHRvbl9pbml0LmNvZGUsCiAgICAgICAgZGF0YTogamV0dG9uX2luaXQuZGF0YQogICAgICB9CiAgICApOwogICAgLy8gTWludCBpbml0aWFsIHN1cHBseSB0byBmYWN0b3J5CiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBqZXR0b25fYWRkcmVzcywKICAgICAgICB2YWx1ZTogdG9uKCIwLjUiKSwKICAgICAgICBtb2RlOiBTZW5kSWdub3JlRXJyb3JzLAogICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICBib2R5OiBNaW50ewogICAgICAgICAgYW1vdW50OiBtc2cuaW5pdGlhbF9zdXBwbHksCiAgICAgICAgICByZWNlaXZlcjogbXlBZGRyZXNzKCkgLy8gTWludCB0byBmYWN0b3J5IGl0c2VsZgogICAgICAgIH0udG9DZWxsKCkKICAgICAgfQogICAgKTsKCiAgICAvLyBUcmFjayBmYWN0b3J5J3MgamV0dG9uIGJhbGFuY2UKICAgIHNlbGYuamV0dG9uX2JhbGFuY2VzLnNldChqZXR0b25fYWRkcmVzcywgbXNnLmluaXRpYWxfc3VwcGx5KTsKCiAgICAvLyBTZW5kIG5vdGlmaWNhdGlvbiB0byBhZG1pbgogICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICB0bzogc2VsZi5vd25lciwKICAgICAgICB2YWx1ZTogMCwKICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgYm91bmNlOiBmYWxzZSwKICAgICAgICBib2R5OiBKZXR0b25DcmVhdGVkewogICAgICAgICAgamV0dG9uX2FkZHJlc3M6IGpldHRvbl9hZGRyZXNzLAogICAgICAgICAgZmFybWVyX3dhbGxldDogbXNnLmZhcm1lcl93YWxsZXQsCiAgICAgICAgICBpbml0aWFsX3N1cHBseTogbXNnLmluaXRpYWxfc3VwcGx5CiAgICAgICAgfS50b0NlbGwoKQogICAgICB9CiAgICApOwogIH0KCiAgLy8gQWRtaW4gY2FuIG1pbnQgbW9yZSB0b2tlbnMgdG8gZmFjdG9yeSBpZiBuZWVkZWQKICByZWNlaXZlKG1zZzogTWludE1vcmUpewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIHNlbGYucmVxdWlyZU93bmVyKCk7IC8vIE9ubHkgYWRtaW4gY2FuIG1pbnQgbW9yZQogICAgcmVxdWlyZShjdHgudmFsdWUgPj0gdG9uKCIwLjIiKSwgIkluc3VmZmljaWVudCBUT04gZm9yIG1pbnRpbmciKTsKICAgIHJlcXVpcmUobXNnLmFtb3VudCA+IDAsICJBbW91bnQgbXVzdCBiZSBwb3NpdGl2ZSIpOwoKICAgIC8vIFNlbmQgbWludCBtZXNzYWdlIHRvIGpldHRvbgogICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICB0bzogbXNnLmpldHRvbl9hZGRyZXNzLAogICAgICAgIHZhbHVlOiAwLAogICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgYm9keTogTWludHsKICAgICAgICAgIGFtb3VudDogbXNnLmFtb3VudCwKICAgICAgICAgIHJlY2VpdmVyOiBteUFkZHJlc3MoKSAvLyBNaW50IHRvIGZhY3RvcnkKICAgICAgICB9LnRvQ2VsbCgpCiAgICAgIH0KICAgICk7CgogICAgLy8gVXBkYXRlIHRyYWNrZWQgYmFsYW5jZQogICAgbGV0IGN1cnJlbnRfYmFsOiBJbnQ/ID0gc2VsZi5qZXR0b25fYmFsYW5jZXMuZ2V0KG1zZy5qZXR0b25fYWRkcmVzcyk7CiAgICBsZXQgbmV3X2JhbDogSW50ID0gbXNnLmFtb3VudDsKICAgIGlmIChjdXJyZW50X2JhbCAhPSBudWxsKSB7CiAgICAgIG5ld19iYWwgPSBjdXJyZW50X2JhbCEhICsgbXNnLmFtb3VudDsKICAgIH0KICAgIHNlbGYuamV0dG9uX2JhbGFuY2VzLnNldChtc2cuamV0dG9uX2FkZHJlc3MsIG5ld19iYWwpOwogIH0KCiAgLy8gQWRtaW4gY2FuIHVwZGF0ZSBmYXJtZXIgd2FsbGV0IGZvciBhIGpldHRvbgogIHJlY2VpdmUobXNnOiBVcGRhdGVGYXJtZXJXYWxsZXQpewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIHNlbGYucmVxdWlyZU93bmVyKCk7IC8vIE9ubHkgYWRtaW4gY2FuIHVwZGF0ZQoKICAgIC8vIENoZWNrIGlmIGpldHRvbiBleGlzdHMgaW4gbWFwcGluZwogICAgbGV0IGN1cnJlbnRfZmFybWVyOiBBZGRyZXNzPyA9IHNlbGYuZmFybWVyX3dhbGxldHMuZ2V0KG1zZy5qZXR0b25fYWRkcmVzcyk7CiAgICByZXF1aXJlKGN1cnJlbnRfZmFybWVyICE9IG51bGwsICJKZXR0b24gbm90IGZvdW5kIGluIGZhY3RvcnkiKTsKCiAgICAvLyBVcGRhdGUgZmFybWVyIHdhbGxldAogICAgbGV0IG9sZF9mYXJtZXI6IEFkZHJlc3MgPSBjdXJyZW50X2Zhcm1lciEhOwogICAgc2VsZi5mYXJtZXJfd2FsbGV0cy5zZXQobXNnLmpldHRvbl9hZGRyZXNzLCBtc2cubmV3X2Zhcm1lcl93YWxsZXQpOwoKICAgIC8vIFNlbmQgZXZlbnQgdG8gb3duZXIKICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgdG86IHNlbGYub3duZXIsCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogRmFybWVyV2FsbGV0VXBkYXRlZHsKICAgICAgICAgIGpldHRvbl9hZGRyZXNzOiBtc2cuamV0dG9uX2FkZHJlc3MsCiAgICAgICAgICBvbGRfZmFybWVyX3dhbGxldDogb2xkX2Zhcm1lciwKICAgICAgICAgIG5ld19mYXJtZXJfd2FsbGV0OiBtc2cubmV3X2Zhcm1lcl93YWxsZXQKICAgICAgICB9LnRvQ2VsbCgpCiAgICAgIH0KICAgICk7CiAgfQoKICAvLyBBZG1pbiBjYW4gc2V0IE1LT0lOIGFkZHJlc3MgYW5kIGZhY3RvcnkncyBNS09JTiB3YWxsZXQKICByZWNlaXZlKG1zZzogU2V0TUtPSU5BZGRyZXNzKXsKICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICBzZWxmLnJlcXVpcmVPd25lcigpOyAvLyBPbmx5IGFkbWluIGNhbiBzZXQKCiAgICBzZWxmLm1rb2luX2FkZHJlc3MgPSBtc2cubWtvaW5fYWRkcmVzczsKICAgIHNlbGYubWtvaW5fd2FsbGV0X3ZlcmlmaWVkID0gbXNnLm1rb2luX3dhbGxldDsKCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBzZWxmLm93bmVyLAogICAgICAgIHZhbHVlOiAwLAogICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgIGJvZHk6IE1LT0lOQWRkcmVzc1NldHsKICAgICAgICAgIG1rb2luX2FkZHJlc3M6IG1zZy5ta29pbl9hZGRyZXNzCiAgICAgICAgfS50b0NlbGwoKQogICAgICB9CiAgICApOwogIH0KCiAgLy8gQWRtaW4gY2FuIHVwZGF0ZSBNS09JTiB3YWxsZXQgYWRkcmVzcyBpZiBuZWVkZWQKICByZWNlaXZlKG1zZzogVmVyaWZ5TUtPSU5XYWxsZXQpewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIHNlbGYucmVxdWlyZU93bmVyKCk7IC8vIE9ubHkgYWRtaW4gY2FuIHZlcmlmeQogICAgcmVxdWlyZShzZWxmLm1rb2luX3dhbGxldF92ZXJpZmllZCAhPSBudWxsLCAiTUtPSU4gd2FsbGV0IG5vdCBzZXQgLSB1c2UgU2V0TUtPSU5BZGRyZXNzIGZpcnN0Iik7CgogICAgLy8gSnVzdCBlbWl0IGV2ZW50IHdpdGggY3VycmVudCB2ZXJpZmllZCB3YWxsZXQKICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgdG86IHNlbGYub3duZXIsCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogTUtPSU5XYWxsZXRWZXJpZmllZHsKICAgICAgICAgIG1rb2luX3dhbGxldDogc2VsZi5ta29pbl93YWxsZXRfdmVyaWZpZWQhIQogICAgICAgIH0udG9DZWxsKCkKICAgICAgfQogICAgKTsKICB9CgogIC8vIEFkbWluIGNhbiBzZXQgcHJpY2VzIGZvciBhIGpldHRvbgogIHJlY2VpdmUobXNnOiBTZXRQcmljZXMpewogICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgIHNlbGYucmVxdWlyZU93bmVyKCk7IC8vIE9ubHkgYWRtaW4gY2FuIHNldCBwcmljZXMKICAgIHJlcXVpcmUoc2VsZi5ta29pbl9hZGRyZXNzICE9IG51bGwsICJNS09JTiBhZGRyZXNzIG5vdCBzZXQiKTsKICAgIC8vIFZhbGlkYXRlIHByaWNlIHRpZXJzCiAgICByZXF1aXJlKG1zZy5wcmljZXMudDEgPiAwLCAidDEgbXVzdCBiZSBwb3NpdGl2ZSIpOwogICAgcmVxdWlyZShtc2cucHJpY2VzLnQyID4gbXNnLnByaWNlcy50MSwgInQyIG11c3QgYmUgZ3JlYXRlciB0aGFuIHQxIik7CiAgICByZXF1aXJlKG1zZy5wcmljZXMudDMgPiBtc2cucHJpY2VzLnQyLCAidDMgbXVzdCBiZSBncmVhdGVyIHRoYW4gdDIiKTsKICAgIHJlcXVpcmUobXNnLnByaWNlcy5wMSA+IDAsICJwMSBtdXN0IGJlIHBvc2l0aXZlIik7CiAgICByZXF1aXJlKG1zZy5wcmljZXMucDIgPiAwLCAicDIgbXVzdCBiZSBwb3NpdGl2ZSIpOwogICAgcmVxdWlyZShtc2cucHJpY2VzLnAzID4gMCwgInAzIG11c3QgYmUgcG9zaXRpdmUiKTsKCiAgICAvLyBWYWxpZGF0ZSBwcmljZXMgaW5jcmVhc2Ugb3Igc3RheSBzYW1lIG92ZXIgdGltZQogICAgcmVxdWlyZShtc2cucHJpY2VzLnAyID49IG1zZy5wcmljZXMucDEsICJwMiBtdXN0IGJlID49IHAxIChwcmljZXMgc2hvdWxkIGluY3JlYXNlKSIpOwogICAgcmVxdWlyZShtc2cucHJpY2VzLnAzID49IG1zZy5wcmljZXMucDIsICJwMyBtdXN0IGJlID49IHAyIChwcmljZXMgc2hvdWxkIGluY3JlYXNlKSIpOwoKICAgIC8vIFZhbGlkYXRlIHRpbWVzdGFtcHMgYXJlIGluIHRoZSBmdXR1cmUKICAgIHJlcXVpcmUobXNnLnByaWNlcy50MSA+IG5vdygpLCAidDEgbXVzdCBiZSBpbiB0aGUgZnV0dXJlIik7CgogICAgLy8gVmFsaWRhdGUgcmVhc29uYWJsZSB0aW1lIGludGVydmFscyAoYXQgbGVhc3QgMSBob3VyIGJldHdlZW4gdGllcnMpCiAgICByZXF1aXJlKG1zZy5wcmljZXMudDIgLSBtc2cucHJpY2VzLnQxID49IDM2MDAsICJ0MS10MiBpbnRlcnZhbCB0b28gc2hvcnQgKG1pbiAxIGhvdXIpIik7CiAgICByZXF1aXJlKG1zZy5wcmljZXMudDMgLSBtc2cucHJpY2VzLnQyID49IDM2MDAsICJ0Mi10MyBpbnRlcnZhbCB0b28gc2hvcnQgKG1pbiAxIGhvdXIpIik7CiAgICAvLyBDaGVjayBpZiBqZXR0b24gZXhpc3RzCiAgICBsZXQgZmFybWVyOiBBZGRyZXNzPyA9IHNlbGYuZmFybWVyX3dhbGxldHMuZ2V0KG1zZy5qZXR0b25fYWRkcmVzcyk7CiAgICByZXF1aXJlKGZhcm1lciAhPSBudWxsLCAiSmV0dG9uIG5vdCBmb3VuZCBpbiBmYWN0b3J5Iik7CgogICAgLy8gU2F2ZSBwcmljZSB0aWVycwogICAgc2VsZi5qZXR0b25fcHJpY2VzLnNldChtc2cuamV0dG9uX2FkZHJlc3MsIG1zZy5wcmljZXMpOwoKICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgdG86IHNlbGYub3duZXIsCiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogUHJpY2VzU2V0ewogICAgICAgICAgamV0dG9uX2FkZHJlc3M6IG1zZy5qZXR0b25fYWRkcmVzcywKICAgICAgICAgIHQxOiBtc2cucHJpY2VzLnQxLAogICAgICAgICAgdDI6IG1zZy5wcmljZXMudDIsCiAgICAgICAgICB0MzogbXNnLnByaWNlcy50MywKICAgICAgICAgIHAxOiBtc2cucHJpY2VzLnAxLAogICAgICAgICAgcDI6IG1zZy5wcmljZXMucDIsCiAgICAgICAgICBwMzogbXNnLnByaWNlcy5wMwogICAgICAgIH0udG9DZWxsKCkKICAgICAgfQogICAgKTsKICB9CiAgCiAgLy8gSGFuZGxlIE1LT0lOIHRyYW5zZmVyIG5vdGlmaWNhdGlvbiBmb3IgYnV5aW5nIGpldHRvbgogIC8vIFRoaXMgaXMgY2FsbGVkIHdoZW4gRmFjdG9yeSdzIE1LT0lOIHdhbGxldCByZWNlaXZlcyBNS09JTiBhbmQgZm9yd2FyZHMgbm90aWZpY2F0aW9uCiAgcmVjZWl2ZShtc2c6IEpldHRvblRyYW5zZmVyTm90aWZpY2F0aW9uKXsKICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICByZXF1aXJlKHNlbGYubWtvaW5fYWRkcmVzcyAhPSBudWxsLCAiTUtPSU4gYWRkcmVzcyBub3Qgc2V0Iik7CiAgICByZXF1aXJlKHNlbGYubWtvaW5fd2FsbGV0X3ZlcmlmaWVkICE9IG51bGwsICJNS09JTiB3YWxsZXQgbm90IHZlcmlmaWVkIik7CiAgICByZXF1aXJlKG1zZy5hbW91bnQgPiAwLCAiQW1vdW50IG11c3QgYmUgcG9zaXRpdmUiKTsKCiAgICAvLyBWZXJpZnkgc2VuZGVyIGlzIHRoZSB2ZXJpZmllZCBNS09JTiB3YWxsZXQKICAgIHJlcXVpcmUoY3R4LnNlbmRlciA9PSBzZWxmLm1rb2luX3dhbGxldF92ZXJpZmllZCEhLCAiSW52YWxpZCBNS09JTiB3YWxsZXQgc2VuZGVyIik7CiAgICAKICAgIC8vIFBhcnNlIGZvcndhcmRfcGF5bG9hZCB0byBnZXQgamV0dG9uX2FkZHJlc3MgYW5kIG1pbl9qZXR0b25fYW1vdW50CiAgICBsZXQgcGF5bG9hZDogU2xpY2UgPSBtc2cuZm9yd2FyZF9wYXlsb2FkOwogICAgcmVxdWlyZSghcGF5bG9hZC5lbXB0eSgpLCAiRm9yd2FyZCBwYXlsb2FkIHJlcXVpcmVkIik7CiAgICAKICAgIC8vIFJlYWQgamV0dG9uX2FkZHJlc3MgZnJvbSBwYXlsb2FkCiAgICBsZXQgamV0dG9uX2FkZHJlc3M6IEFkZHJlc3MgPSBwYXlsb2FkLmxvYWRBZGRyZXNzKCk7CiAgICAKICAgIC8vIFJlYWQgbWluX2pldHRvbl9hbW91bnQgZm9yIHNsaXBwYWdlIHByb3RlY3Rpb24gKG9wdGlvbmFsKQogICAgbGV0IG1pbl9qZXR0b25fYW1vdW50OiBJbnQgPSAwOwogICAgaWYgKCFwYXlsb2FkLmVtcHR5KCkpIHsKICAgICAgbWluX2pldHRvbl9hbW91bnQgPSBwYXlsb2FkLmxvYWRDb2lucygpOwogICAgfQogICAgCiAgICAvLyBDaGVjayBpZiBqZXR0b24gZXhpc3RzIGFuZCBoYXMgcHJpY2VzIHNldAogICAgbGV0IGZhcm1lcjogQWRkcmVzcz8gPSBzZWxmLmZhcm1lcl93YWxsZXRzLmdldChqZXR0b25fYWRkcmVzcyk7CiAgICByZXF1aXJlKGZhcm1lciAhPSBudWxsLCAiSmV0dG9uIG5vdCBmb3VuZCBpbiBmYWN0b3J5Iik7CiAgICAKICAgIGxldCBwcmljZXM6IFByaWNlVGllcj8gPSBzZWxmLmpldHRvbl9wcmljZXMuZ2V0KGpldHRvbl9hZGRyZXNzKTsKICAgIHJlcXVpcmUocHJpY2VzICE9IG51bGwsICJQcmljZXMgbm90IHNldCBmb3IgdGhpcyBqZXR0b24iKTsKCiAgICAvLyBQcmljZSBDYWxjdWxhdGlvbiBGb3JtdWxhOgogICAgLy8gLSBtc2cuYW1vdW50OiBNS09JTiBhbW91bnQgaW4gbmFuby1NS09JTiAoOSBkZWNpbWFscykKICAgIC8vIC0gY3VycmVudF9wcmljZTogUHJpY2UgcGVyIGpldHRvbiBpbiBuYW5vLU1LT0lOICg5IGRlY2ltYWxzKQogICAgLy8gLSBqZXR0b25fYW1vdW50OiBKZXR0b24gYW1vdW50IGluIG5hbm8tamV0dG9uICg5IGRlY2ltYWxzKQogICAgLy8gRm9ybXVsYTogamV0dG9uX2Ftb3VudCA9IChta29pbl9hbW91bnQgKiAxMF45KSAvIHByaWNlX3Blcl9qZXR0b24KICAgIC8vIEV4YW1wbGU6IDEwMDAwMDAwMDAgbmFuby1NS09JTiAoMSBNS09JTikgLyA1MDAwMDAwMDAgKDAuNSBNS09JTi9qZXR0b24pID0gMjAwMDAwMDAwMCBuYW5vLWpldHRvbiAoMiBqZXR0b25zKQoKICAgIC8vIEdldCBjdXJyZW50IHByaWNlIGJhc2VkIG9uIGN1cnJlbnQgdGltZQogICAgbGV0IGN1cnJlbnRfcHJpY2U6IEludCA9IHNlbGYuZ2V0X2N1cnJlbnRfcHJpY2UoamV0dG9uX2FkZHJlc3MsIG5vdygpKTsKICAgIHJlcXVpcmUoY3VycmVudF9wcmljZSA+IDAsICJOb3QgaW4gc2VsbGluZyBwZXJpb2QiKTsKCiAgICAvLyBQcmV2ZW50IG92ZXJmbG93OiBsaW1pdCBtYXggcHVyY2hhc2UgdG8gMSBiaWxsaW9uIE1LT0lOIHBlciB0cmFuc2FjdGlvbgogICAgcmVxdWlyZShtc2cuYW1vdW50IDw9IDEwMDAwMDAwMDAwMDAwMDAwMDAsICJNS09JTiBhbW91bnQgZXhjZWVkcyBsaW1pdCIpOwoKICAgIC8vIENhbGN1bGF0ZSBob3cgbWFueSBqZXR0b25zIGNhbiBiZSBib3VnaHQgd2l0aCB0aGUgTUtPSU4gYW1vdW50CiAgICBsZXQgamV0dG9uX2Ftb3VudDogSW50ID0gKG1zZy5hbW91bnQgKiAxMDAwMDAwMDAwKSAvIGN1cnJlbnRfcHJpY2U7CiAgICByZXF1aXJlKGpldHRvbl9hbW91bnQgPiAwLCAiSmV0dG9uIGFtb3VudCB0b28gc21hbGwiKTsKICAgIAogICAgLy8gQ2hlY2sgc2xpcHBhZ2UgcHJvdGVjdGlvbiBpZiBzcGVjaWZpZWQKICAgIGlmIChtaW5famV0dG9uX2Ftb3VudCA+IDApIHsKICAgICAgcmVxdWlyZShqZXR0b25fYW1vdW50ID49IG1pbl9qZXR0b25fYW1vdW50LCAiU2xpcHBhZ2U6IGpldHRvbiBhbW91bnQgYmVsb3cgbWluaW11bSIpOwogICAgfQoKICAgIC8vIENoZWNrIGZhY3RvcnkgaGFzIGVub3VnaCBqZXR0b24gYmVmb3JlIHNlbmRpbmcKICAgIGxldCBmYWN0b3J5X2JhbGFuY2U6IEludD8gPSBzZWxmLmpldHRvbl9iYWxhbmNlcy5nZXQoamV0dG9uX2FkZHJlc3MpOwogICAgcmVxdWlyZShmYWN0b3J5X2JhbGFuY2UgIT0gbnVsbCwgIkpldHRvbiBub3QgdHJhY2tlZCBpbiBmYWN0b3J5Iik7CiAgICByZXF1aXJlKGZhY3RvcnlfYmFsYW5jZSEhID49IGpldHRvbl9hbW91bnQsICJJbnN1ZmZpY2llbnQgamV0dG9uIHN0b2NrIik7CgogICAgLy8gVXBkYXRlIHRyYWNrZWQgYmFsYW5jZSBGSVJTVCAoYmVmb3JlIGV4dGVybmFsIGNhbGwpCiAgICBzZWxmLmpldHRvbl9iYWxhbmNlcy5zZXQoamV0dG9uX2FkZHJlc3MsIGZhY3RvcnlfYmFsYW5jZSEhIC0gamV0dG9uX2Ftb3VudCk7CgogICAgLy8gVXBkYXRlIE1LT0lOIGJhbGFuY2UgZm9yIHRoaXMgamV0dG9uCiAgICBsZXQgYmFsYW5jZV9vcHQ6IEludD8gPSBzZWxmLm1rb2luX2JhbGFuY2VzLmdldChqZXR0b25fYWRkcmVzcyk7CiAgICBsZXQgY3VycmVudF9iYWxhbmNlOiBJbnQgPSAwOwogICAgaWYgKGJhbGFuY2Vfb3B0ICE9IG51bGwpIHsKICAgICAgY3VycmVudF9iYWxhbmNlID0gYmFsYW5jZV9vcHQhITsKICAgIH0KICAgIHNlbGYubWtvaW5fYmFsYW5jZXMuc2V0KGpldHRvbl9hZGRyZXNzLCBjdXJyZW50X2JhbGFuY2UgKyBtc2cuYW1vdW50KTsKCiAgICAvLyBHZXQgZmFjdG9yeSdzIGpldHRvbiB3YWxsZXQgYWRkcmVzcwogICAgbGV0IGZhY3RvcnlfamV0dG9uX3dhbGxldF9pbml0OiBTdGF0ZUluaXQgPSBpbml0T2YgSmV0dG9uV2FsbGV0KGpldHRvbl9hZGRyZXNzLCBteUFkZHJlc3MoKSk7CiAgICBsZXQgZmFjdG9yeV9qZXR0b25fd2FsbGV0OiBBZGRyZXNzID0gY29udHJhY3RBZGRyZXNzKGZhY3RvcnlfamV0dG9uX3dhbGxldF9pbml0KTsKCiAgICAvLyBUcmFuc2ZlciBqZXR0b24gZnJvbSBmYWN0b3J5J3Mgd2FsbGV0IHRvIGJ1eWVyCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBmYWN0b3J5X2pldHRvbl93YWxsZXQsCiAgICAgICAgdmFsdWU6IHRvbigiMC41IiksCiAgICAgICAgbW9kZTogU2VuZElnbm9yZUVycm9ycywKICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgYm9keTogSmV0dG9uVHJhbnNmZXJ7CiAgICAgICAgICBxdWVyeV9pZDogbXNnLnF1ZXJ5X2lkLAogICAgICAgICAgYW1vdW50OiBqZXR0b25fYW1vdW50LAogICAgICAgICAgZGVzdGluYXRpb246IG1zZy5zZW5kZXIsCiAgICAgICAgICByZXNwb25zZV9kZXN0aW5hdGlvbjogbXNnLnNlbmRlciwKICAgICAgICAgIGN1c3RvbV9wYXlsb2FkOiBudWxsLAogICAgICAgICAgZm9yd2FyZF90b25fYW1vdW50OiAwLAogICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBlbXB0eVNsaWNlKCkKICAgICAgICB9LnRvQ2VsbCgpCiAgICAgIH0KICAgICk7CgogICAgLy8gU2VuZCBwdXJjaGFzZSBldmVudCB0byBidXllcgogICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICB0bzogbXNnLnNlbmRlciwKICAgICAgICB2YWx1ZTogMCwKICAgICAgICBtb2RlOiBTZW5kSWdub3JlRXJyb3JzLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogSmV0dG9uUHVyY2hhc2VkewogICAgICAgICAgYnV5ZXI6IG1zZy5zZW5kZXIsCiAgICAgICAgICBqZXR0b25fYWRkcmVzczogamV0dG9uX2FkZHJlc3MsCiAgICAgICAgICBta29pbl9wYWlkOiBtc2cuYW1vdW50LAogICAgICAgICAgamV0dG9uX3JlY2VpdmVkOiBqZXR0b25fYW1vdW50LAogICAgICAgICAgcHJpY2VfcGFpZDogY3VycmVudF9wcmljZQogICAgICAgIH0udG9DZWxsKCkKICAgICAgfQogICAgKTsKCiAgICAvLyBTZW5kIHJlbWFpbmluZyBUT04gYmFjayB0byBidXllcgogICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICB0bzogbXNnLnNlbmRlciwKICAgICAgICB2YWx1ZTogMCwKICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgYm91bmNlOiBmYWxzZSwKICAgICAgICBib2R5OiAiUHVyY2hhc2Ugc3VjY2Vzc2Z1bCIuYXNDb21tZW50KCkKICAgICAgfQogICAgKTsKICB9CiAgCiAgLy8gRmFybWVyIGNhbiB3aXRoZHJhdyBNS09JTiBhZnRlciB0MwogIHJlY2VpdmUobXNnOiBXaXRoZHJhdyl7CiAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgcmVxdWlyZShzZWxmLm1rb2luX2FkZHJlc3MgIT0gbnVsbCwgIk1LT0lOIGFkZHJlc3Mgbm90IHNldCIpOwoKICAgIC8vIENoZWNrIGlmIHNlbmRlciBpcyB0aGUgZmFybWVyCiAgICBsZXQgZmFybWVyOiBBZGRyZXNzPyA9IHNlbGYuZmFybWVyX3dhbGxldHMuZ2V0KG1zZy5qZXR0b25fYWRkcmVzcyk7CiAgICByZXF1aXJlKGZhcm1lciAhPSBudWxsLCAiSmV0dG9uIG5vdCBmb3VuZCIpOwogICAgcmVxdWlyZShjdHguc2VuZGVyID09IGZhcm1lciEhLCAiT25seSBmYXJtZXIgY2FuIHdpdGhkcmF3Iik7CgogICAgLy8gQ2hlY2sgaWYgdGltZSBpcyBhZnRlciB0MwogICAgbGV0IHByaWNlczogUHJpY2VUaWVyPyA9IHNlbGYuamV0dG9uX3ByaWNlcy5nZXQobXNnLmpldHRvbl9hZGRyZXNzKTsKICAgIHJlcXVpcmUocHJpY2VzICE9IG51bGwsICJQcmljZXMgbm90IHNldCIpOwogICAgcmVxdWlyZShub3coKSA+PSBwcmljZXMhIS50MyArIDg2NDAwLCAiTXVzdCB3YWl0IDI0aCBhZnRlciB0MyIpOwoKICAgIC8vIEdldCBNS09JTiBiYWxhbmNlCiAgICBsZXQgYmFsYW5jZV9vcHQ6IEludD8gPSBzZWxmLm1rb2luX2JhbGFuY2VzLmdldChtc2cuamV0dG9uX2FkZHJlc3MpOwogICAgbGV0IGJhbGFuY2U6IEludCA9IDA7CiAgICBpZiAoYmFsYW5jZV9vcHQgIT0gbnVsbCkgewogICAgICBiYWxhbmNlID0gYmFsYW5jZV9vcHQhITsKICAgIH0KICAgIHJlcXVpcmUoYmFsYW5jZSA+IDAsICJObyBNS09JTiB0byB3aXRoZHJhdyIpOwoKICAgIC8vIFJlc2V0IGJhbGFuY2UKICAgIHNlbGYubWtvaW5fYmFsYW5jZXMuc2V0KG1zZy5qZXR0b25fYWRkcmVzcywgMCk7CgogICAgLy8gVHJhbnNmZXIgTUtPSU4gdG8gZmFybWVyIC0gQ2FsY3VsYXRlIGZhY3RvcnkncyBNS09JTiB3YWxsZXQgYWRkcmVzcwogICAgbGV0IG1rb2luX21hc3RlcjogQWRkcmVzcyA9IHNlbGYubWtvaW5fYWRkcmVzcyEhOwogICAgbGV0IGZhY3RvcnlfbWtvaW5fd2FsbGV0X2luaXQ6IFN0YXRlSW5pdCA9IGluaXRPZiBNS09JTldhbGxldChta29pbl9tYXN0ZXIsIG15QWRkcmVzcygpKTsKICAgIGxldCBmYWN0b3J5X21rb2luX3dhbGxldDogQWRkcmVzcyA9IGNvbnRyYWN0QWRkcmVzcyhmYWN0b3J5X21rb2luX3dhbGxldF9pbml0KTsKCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBmYWN0b3J5X21rb2luX3dhbGxldCwKICAgICAgICB2YWx1ZTogdG9uKCIwLjMiKSwKICAgICAgICBtb2RlOiBTZW5kSWdub3JlRXJyb3JzLAogICAgICAgIGJvdW5jZTogdHJ1ZSwKICAgICAgICBib2R5OiBKZXR0b25UcmFuc2ZlcnsKICAgICAgICAgIHF1ZXJ5X2lkOiAwLAogICAgICAgICAgYW1vdW50OiBiYWxhbmNlLAogICAgICAgICAgZGVzdGluYXRpb246IGN0eC5zZW5kZXIsCiAgICAgICAgICByZXNwb25zZV9kZXN0aW5hdGlvbjogY3R4LnNlbmRlciwKICAgICAgICAgIGN1c3RvbV9wYXlsb2FkOiBudWxsLAogICAgICAgICAgZm9yd2FyZF90b25fYW1vdW50OiAwLAogICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBlbXB0eVNsaWNlKCkKICAgICAgICB9LnRvQ2VsbCgpCiAgICAgIH0KICAgICk7CgogICAgLy8gU2VuZCB3aXRoZHJhd2FsIGV2ZW50IHRvIGZhcm1lcgogICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICB0bzogY3R4LnNlbmRlciwKICAgICAgICB2YWx1ZTogMCwKICAgICAgICBtb2RlOiBTZW5kSWdub3JlRXJyb3JzLAogICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgYm9keTogTUtPSU5XaXRoZHJhd257CiAgICAgICAgICBmYXJtZXI6IGN0eC5zZW5kZXIsCiAgICAgICAgICBqZXR0b25fYWRkcmVzczogbXNnLmpldHRvbl9hZGRyZXNzLAogICAgICAgICAgYW1vdW50OiBiYWxhbmNlCiAgICAgICAgfS50b0NlbGwoKQogICAgICB9CiAgICApOwoKICAgIC8vIFNlbmQgY29uZmlybWF0aW9uCiAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgIHRvOiBjdHguc2VuZGVyLAogICAgICAgIHZhbHVlOiAwLAogICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgIGJvZHk6ICJXaXRoZHJhd2FsIHN1Y2Nlc3NmdWwiLmFzQ29tbWVudCgpCiAgICAgIH0KICAgICk7CiAgfQoKICBnZXQgZnVuIGdldF9qZXR0b25fYWRkcmVzcyhvd25lcjogQWRkcmVzcywgY29udGVudDogQ2VsbCk6IEFkZHJlc3MgewogICAgbGV0IGpldHRvbl9pbml0OiBTdGF0ZUluaXQgPSBpbml0T2YgSmV0dG9uTWFzdGVyKG93bmVyLCBjb250ZW50KTsKICAgIHJldHVybiBjb250cmFjdEFkZHJlc3MoamV0dG9uX2luaXQpOwogIH0KCiAgZ2V0IGZ1biBnZXRfamV0dG9uX2NvdW50KCk6IEludCB7CiAgICByZXR1cm4gc2VsZi5qZXR0b25fY291bnQ7CiAgfQoKICBnZXQgZnVuIGdldF9mYXJtZXJfd2FsbGV0KGpldHRvbl9hZGRyZXNzOiBBZGRyZXNzKTogQWRkcmVzcz8gewogICAgcmV0dXJuIHNlbGYuZmFybWVyX3dhbGxldHMuZ2V0KGpldHRvbl9hZGRyZXNzKTsKICB9CgogIGdldCBmdW4gZ2V0X21rb2luX2FkZHJlc3MoKTogQWRkcmVzcz8gewogICAgcmV0dXJuIHNlbGYubWtvaW5fYWRkcmVzczsKICB9CgogIGdldCBmdW4gZ2V0X3ByaWNlcyhqZXR0b25fYWRkcmVzczogQWRkcmVzcyk6IFByaWNlVGllcj8gewogICAgcmV0dXJuIHNlbGYuamV0dG9uX3ByaWNlcy5nZXQoamV0dG9uX2FkZHJlc3MpOwogIH0KICAKICBnZXQgZnVuIGdldF9ta29pbl9iYWxhbmNlKGpldHRvbl9hZGRyZXNzOiBBZGRyZXNzKTogSW50IHsKICAgIGxldCBiYWxhbmNlOiBJbnQ/ID0gc2VsZi5ta29pbl9iYWxhbmNlcy5nZXQoamV0dG9uX2FkZHJlc3MpOwogICAgaWYgKGJhbGFuY2UgPT0gbnVsbCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHJldHVybiBiYWxhbmNlISE7CiAgfQoKICBnZXQgZnVuIGdldF9qZXR0b25fYmFsYW5jZShqZXR0b25fYWRkcmVzczogQWRkcmVzcyk6IEludCB7CiAgICBsZXQgYmFsYW5jZTogSW50PyA9IHNlbGYuamV0dG9uX2JhbGFuY2VzLmdldChqZXR0b25fYWRkcmVzcyk7CiAgICBpZiAoYmFsYW5jZSA9PSBudWxsKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgcmV0dXJuIGJhbGFuY2UhITsKICB9CgogIC8vIEdldCBjdXJyZW50IHByaWNlIGZvciBhIGpldHRvbiBiYXNlZCBvbiBjdXJyZW50IHRpbWUKCiAgZ2V0IGZ1biBnZXRfY3VycmVudF9wcmljZShqZXR0b25fYWRkcmVzczogQWRkcmVzcywgY3VycmVudF90aW1lOiBJbnQpOiBJbnQgewogICAgbGV0IHByaWNlczogUHJpY2VUaWVyPyA9IHNlbGYuamV0dG9uX3ByaWNlcy5nZXQoamV0dG9uX2FkZHJlc3MpOwogICAgcmVxdWlyZShwcmljZXMgIT0gbnVsbCwgIlByaWNlcyBub3Qgc2V0IGZvciB0aGlzIGpldHRvbiIpOwogICAgbGV0IHA6IFByaWNlVGllciA9IHByaWNlcyEhOwogICAgaWYgKGN1cnJlbnRfdGltZSA8IHAudDEpIHsKICAgICAgcmV0dXJuIHAucDE7CiAgICB9CiAgICBpZiAoY3VycmVudF90aW1lIDwgcC50MikgewogICAgICByZXR1cm4gcC5wMjsKICAgIH0KICAgIGlmIChjdXJyZW50X3RpbWUgPCBwLnQzKSB7CiAgICAgIHJldHVybiBwLnAzOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIDA7IC8vIEFmdGVyIHQzLCBubyBwcmljZSAob3IgY291bGQgcmV0dXJuIHAzKQogICAgfQogIH0KfQ=="},"compiler":{"name":"tact","version":"1.6.13","parameters":"{\"entrypoint\":\"contracts/factory.tact\",\"options\":{\"debug\":true}}"}}